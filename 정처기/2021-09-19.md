## 2021-09-19

### 7-3. 애플리케이션 성능 개선

> 애플리케이션 성능 분석

**데이터베이스 관련 성능 저하 원인**

* 데이터베이스 락(DB Lock)
  * 대량의 데이터 조회, 과도한 업데이트, 인덱스 생성 시 발생하는 현상
  * 요청한 작업은 Lock의 해제 시까지 대기하거나 타임 아웃됨
* 불필요한 데이터베이스 패치(DB Fetch)
  * 실제 필요한 데이터보다 많은 대량의 데이터 요청이 들어올 경우 응답  시간 저하 현상 발생
  * 결과 세트에서 마지막 위치로 커서를 옮기는 작업이 빈번한 경우 응답 시간 저하 현상 발생
* 연결 누수(Connection Leak)
  * DB 연결과 관련한 JDBC 객체를 사용 후 종료하지 않을 경우 발생
* 부적절한 커넥션 풀 크기(Connection Pool Size)
  * 너무 작거나 크게 설정한 경우 성능 저하 현상이 발생할 가능성 존재
* 확정(Commit) 관련
  * 트랜잭션이 확정되지 않고 커넥션 풀에 반환될 때 성능 저하 가능성 존재
  * 잘못 작성된 코드로 인해 풀필요한000 확정이 자주 발생하는 경우 성능 저하 가능성 존재

<br>

> 애플리케이션 성능 개선

**나쁜 코드 유형**

* 오염: 비즈니스 기능을 수행하지 못하는 많은 컴포넌트들이 존재
* 문서부족: 현재 코드와 문서가 일치하지 않고 수정과 변경을 위한 도메인 지식은 크게 증가 하지만 개발자의 지식부족 초래
* 의미 없는 이름: 함수, 클래스, 컴포넌트 이름들이 명확한 의미를 갖지 못하거나 실제 작동과 불일치
* 높은 결합도: 클래스와 컴포넌트 간에 데이터와 컨트롤 흐름이 네트워크로 복잡하게 연결
* 아키텍처 침식: 아키텍처가 더 이상 구별되지 않고 여러 솔루션으로 이루어져 아키텍처상 변형들로 인해 시스템 품질이 떨어짐

<br>

**클린 코드 유형**

* 의미 있는 이름
  * 변수나 클래스, 메서드 명을 의도가 분명한 이름(사용용도, 작업명)으로 사용
  * 클래스는 행위의 주체로 명사나 명사구로 표현하고 함수 이름은 클래스가 행하는 행위로 동사 또는 동사구 사용
* 간결하고 명확한 주석
  * 주석이 필요한 경우 최대한 간결하고 명확하게 작성
  * 코드 안에 변경 이력이나 저자 등의 기록은 형상 관리 도구를 사용
  * 코드를 처음 접하는 사람이 궁금한 점에 대해 주석 작성
* 보기 좋은 배치
  * 읽는 사람이 편하게 읽을 수 있도록 구성
  * 반복되는 구문은 새로운 함수로 정리하고 배열을 정리하여 읽기 쉽게 리팩토링
* 작은 함수
  * 함수는 가급적으로 작게 만들고 If문이나 While문 안의 내용은 한 줄로 처리되도록 작성
  * 함수 하나당 하는 일은 하나만 하도록 선언하고 중복이 없도록 작성
* 읽기 쉬운 제어 흐름
  * 조건, 루프 ,흐름을 통제하는 선언문이 코드에 있으면 코드가 읽기 어려움
  * If/Else 조건문에서 인수의 순서는 긍정적이고 간단한 내용을 앞쪽에 배치
* 오류처리
  * 오류코드의 반환보다 예외 처리를 활용
  * 메서드는 널(Null)을 전달하거나 반환하지 말고 널(Null) 체크 코드 작성

