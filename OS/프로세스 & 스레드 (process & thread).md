## 프로세스 & 스레드 (process & thread)

> 프로그램이란?

실행 가능한 파일의 형태로 하드 디스크나 USB 등의 저장 장치에 저장된 파일이다.



> 프로세스 (process)

* 프로그램이 메모리에 로딩되어 실행 중인 작업
* 운영체제로부터 시스템 자원을 할당받는다.
* 할당 받는 시스템 자원
  * CPU 시간
  * 주소 공간
  * Code, Data, Stack, Heap의 구조로 되어있는 독립된 메모리 영역
* 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없으며, 접근을 위해서는 IPC 통신이 필요하다.
* 특징
  * 프로세스는 메모리에 적재되어야 실행된다.
  * 프로세스들은 서로 독립적인 메모리 공간을 가진다.
  * 커널은 각 프로세스의 메모리 위치와 크기 정보를 관리한다.
  * 프로세스마다 고유한 번호가 할당된다.
  * 기본적으로 프로세스마다 최소 1개의 스레드를 갖는다. (메인 스레드)

![process1](https://user-images.githubusercontent.com/68210266/153742418-2aeec577-f43c-4040-869b-ac29984afc69.PNG)



> 프로세스 주소 공간

* Code 영역: 프로세스의 바이너리 코드들이 적재되는 영역. 텍스트(Text) 영역이라고도 불린다. (내가 작성한 코드 + 라이브러리)
* Data 영역: 프로세스의 전역 변수와 정적 변수들을 위해 할당된 영역
* Heap 영역: 프로세스가 실행 중에 동적 할당 받는 영역
* Stack 영역: 함수가 호출될 때, 지역 변수, 매개 변수, 함수의 리턴 값 등을 저장하기 위한 영역



> 프로세스 제어 블록 (Process Control Block, PCB)

* 특정 프로세스에 대한 중요한 정보를 저장하고 있는 커널 내의 자료구조이다.
* 시스템 전체에 하나의 프로세스 테이블을 두고 현재 실행 중인 모든 프로세스들의 정보를 관리한다.
* OS는 프로세스를 관리하기 위해 프로세스의 생성과 동시에 고유한 PCB를 생성한다.
* 프로세스가 생성되면 커널은 PCB를 생성하고 프로세스 테이블의 빈 항목에 PCB를 연결한다. 그리고 프로세스가 종료하면 커널은 PCB를 삭제하고 테이블의 항목에 비어 있음을 표기한다.
* PCB에 저장된 정보
  * 프로세스 번호(Process Identification Number, PID): 프로세스를 유일하게 식별할 수 있도록 고유한 번호
  * 부모 프로세스 번호(Parent Process Identification Number, PPID)
  * 프로세스 상태(Process State): new, running, ready, waiting, terminated 등의 상태를 저장
  * CPU의 컨텍스트 정보(Program Counter 등): 현재 프로세스를 실행하고 있었던 상황을 저장 (PC, SP, 범용 레지스터 등 CPU에 들어 있는 레지스터들의 값)
  * 스케줄링 정보: 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등
  * 종료 코드
  * 메모리 관리 정보:  페이지 테이블 또는 세그먼트 테이블 등과 같은 정보를 포함한다.
  * 입출력 상태 정보: 프로세스에 할당된 입출력 장치들과 오픈 파일 목록
  * 어카운팅 정보: 사용된 CPU 시간, 시간 제한, 계정 번호 등

![process2](https://user-images.githubusercontent.com/68210266/153743230-37c0f751-433b-4d76-8f0f-6787c2bb9406.PNG)



출처 : [프로세스 vs 스레드](https://github.com/WooVictory/Ready-For-Tech-Interview/blob/master/Operating%20System/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80%20%EC%8A%A4%EB%A0%88%EB%93%9C.md)